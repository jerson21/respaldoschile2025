<!DOCTYPE html>
<html lang="es">

<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Confirmación de Entrega</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="old_tienda/assets/img/favicon.png" rel="icon">
  <link href="old_tienda/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="old_tienda/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="old_tienda/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="old_tienda/assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="old_tienda/assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="old_tienda/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="old_tienda/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="old_tienda/assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: FlexStart - v1.4.0
  * Template URL: https://bootstrapmade.com/flexstart-bootstrap-startup-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
 <style type="text/css">


 <style type="text/css">

#imagenes img {
    -webkit-transition: all 1s ease; /* Safari and Chrome */
    -moz-transition: all 1s ease; /* Firefox */
    -ms-transition: all 1s ease; /* IE 9 */
    -o-transition: all 1s ease; /* Opera */
    transition: all 1s ease;
}

#imagenes:hover img {
    -webkit-transform:scale(1.5); /* Safari and Chrome */
    -moz-transform:scale(1.5); /* Firefox */
    -ms-transform:scale(1.5); /* IE 9 */
    -o-transform:scale(1.5); /* Opera */
     transform:scale(1.5);


}

.timeline {
  list-style-type: none;
  display: flex;
  align-items: center;
  justify-content: center;
  
}

.li {
  transition: all 200ms ease-in;
}

.timestamp {
  margin-bottom: 1rem;
  padding: 0px 0.2rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-weight: 2rem;
}

.status {
  padding: 0px 2rem;
  display: flex;
  justify-content: center;
  border-top: 2px solid #D6DCE0;
  position: relative;
  transition: all 200ms ease-in;
}
.status h4 {
  font-weight: 1rem;

  font-size: 1.5rem;
}
.status:before {
  content: "";
  width: 2rem;
  height: 2rem;
  background-color: white;
  border-radius: 2rem;
  border: 1px solid #ddd;
  position: absolute;
  top: -10px;
  left: 42%;
  transition: all 200ms ease-in;
}
.li.enproceso .status {
  border-top: 2px solid #1273FE;

}
.li.enproceso .status:before {
  background-color: #1273FE;
  border: none;
  transition: all 200ms ease-in;
}
.li.enproceso .status h4 {
  font-size: 1.5rem;
  color: #1273FE;
}

.li.complete .status {
  border-top: 2px solid #66DC71;

}
.li.complete .status:before {
  background-color: #66DC71;
  border: none;
  transition: all 200ms ease-in;
}
.li.complete .status h4 {
  font-size: 1.5rem;
  color: #66DC71;
}

@media (min-width: 200px) and (max-width: 600px) {
  .timeline {
    zoom: 0.7;
    -moz-transform: scale(0.9);
    list-style-type: none;
  display: flex;
  align-items: center;
  justify-content: center;
  
}

.li {
  transition: all 200ms ease-in;
}

.timestamp {
  margin-bottom: 1rem;
  padding: 0px 0.2rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-weight: 2rem;
}

.status {
  padding: 0px 1rem;
  display: flex;
  justify-content: center;
  border-top: 2px solid #D6DCE0;
  position: relative;
  transition: all 200ms ease-in;
}
.status h4 {
  font-weight: 1rem;

  font-size: 1.5rem;
}
.status:before {
  content: "";
  width: 1.5rem;
  height: 1.5rem;
  background-color: white;
  border-radius: 2rem;
  border: 1px solid #ddd;
  position: absolute;
  top: -9px;
  left: 42%;
  transition: all 200ms ease-in;
}
.li.enproceso .status {
  border-top: 2px solid #1273FE;

}
.li.enproceso .status:before {
  background-color: #1273FE;
  border: none;
  transition: all 200ms ease-in;
}
.li.enproceso .status h4 {
  font-size: 1.5rem;
  color: #1273FE;
}

.li.complete .status {
  border-top: 2px solid #66DC71;

}
.li.complete .status:before {
  background-color: #66DC71;
  border: none;
  transition: all 200ms ease-in;
}
.li.complete .status h4 {
  font-size: 1.5rem;
  color: #66DC71;
}
}


button {
  position: absolute;
  width: 100px;
  min-width: 100px;
  padding: 20px;
  margin: 20px;
  font-family: "Titillium Web", sans serif;
  border: none;
  color: white;
  font-size: 16px;
  text-align: center;
}


</style>

</head>

<body>

<link href="https://fonts.googleapis.com/css?family=Titillium+Web:200,100,300,600,700" rel="stylesheet" type="text/css">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <img src="assets/img/logo.png" alt="">
        <span>Respaldos Chile</span>
      </a>

   <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="index.html">Inicio</a></li>
          
          
          <li><a class="nav-link scrollto" href="index.html#portfolio">Catalogo</a></li>         
          
          <li class="dropdown"><a href="#"><span>Productos</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              
              <li class="dropdown"><a href="#"><span>Respaldos de Cama</span> <i class="bi bi-chevron-right"></i></a>
                <ul>
                  <li><a href="portfolio-details.php?id=1">Botoné 2 corridas de botones.</a></li><!-- puede ser una imagen -->
                  <li><a href="portfolio-details.php?id=3">Botoné 3 corridas de botones.</a></li>
                  <li><a href="portfolio-details.php?id=6">Capitoné</a></li>
                  <li><a href="portfolio-details.php?id=2">Lisos</a></li>
                  <li><a href="portfolio-details.php?id=5">Lisos con costuras.</a></li>
                </ul>
              </li>
              <li><a href="portfolio-details.php?id=4">Bases de Cama</a></li>
              <li><a href="index.html#">Colchones</a></li>
              <!--<li><a href="#">Drop Down 4</a></li> -->
            </ul>
          </li>
          <li><a class="nav-link scrollto" href="index.html#contact">Contacto</a></li>
          <li><a class="getstarted scrollto" href="seguimientocompra.php">Seguimiento de mi compra</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>

  </header><!-- End Header -->

  <main id="main" style="background-color: #EEEEEE; ">

    <!-- ======= Breadcrumbs ======= -->
    <section class="breadcrumbs">
      <div class="container">

        <ol>
          <li><a href="index.html">Inicio</a></li>
          <li>Clientes</li>
        </ol>
        <h2>Seguimiento Compra</h2>

      </div>
    </section><!-- End Breadcrumbs -->

    <!-- ======= Portfolio Details Section ======= -->
   <script type="text/javascript"></script>

      
</br></br>
<?php include("conexion.php");
$id = $_GET['pedido'];
 $sql1 = "SELECT * FROM  pedido_detalle pd INNER JOIN pedido p ON pd.num_orden = p.num_orden  where p.num_orden = '$id'";
$query1 = $conn->query($sql1);
while ($row1 = $query1->fetch_assoc()) {  $ruta = $row1['ruta_asignada'];   

echo $confirma_cliente = $row1['confirma']; }


   $sql1 = "SELECT fecha FROM rutas where id = '$ruta'"; $query1 = $conn->query($sql1);
while ($row = $query1->fetch_assoc()) {   $ruta = $row['fecha'];    }


?>


      <div class="container" style="width: 95%; background-color: white; padding:1rem; border-radius: 1rem; text-align: center; margin-bottom: 2rem;">
        <?php if($confirma_cliente == ""){ ?>
<div id="confirmacion"> <p>Haz Click aqui para confirmar que puedes recibir el día <b><?php  echo $ruta; ?></b></p>
<?php  } else{  ?>
<div id="confirmacion"> <p>Recibiras tu producto el día <b><?php  echo $ruta; ?></b></p>
<?php  } ?>
  <p style="font-size: 13px; font-weight: bold;">Las entregas son entre las 11am y las 18:00 hrs. Por orden de dirección </p>

<?php      


if($confirma_cliente == ""){?>
        
        <form action="#" method="post">
          <input type="hidden" name="pedido" value="<?php echo $_GET["pedido"];?>">

          <input type="submit" name="submit" class="btn btn-info btn-sm -btn" value="Confirmo que puedo Recibir"> </form>
          
        </form>
      <?php  } else { ?>
        <input type="submit" name="submit" class="btn btn-success btn-sm -btn" value="PEDIDO CONFIRMADO"> </form>
        <br> <p style="font-size: 14px;">Recuerde que nuestros despachadores no pueden ingresar a domicilios ni subir a departamentos. </p>

      <?php  } ?>
      </div>
      <p></p>
        <p style="font-size: 14px;">Los datos de pago los encontraras mas abajo</p>
      <p></p>


      <div style="overflow:scroll;">
<?php

$id = $_GET['pedido'];
 $sql = "SELECT * FROM  pedido_detalle pd INNER JOIN pedido p ON pd.num_orden = p.num_orden where p.num_orden = '$id'";
$query = $conn->query($sql);
  $contador = 0;


$output = "";
$output .= "<table class='table table-hover table-striped table-bordered'>
<thead>
<tr style=''>
<th>Codigo</th>
<th style='width:8rem;'>Rut Cliente</th>
<th style='width:8rem;'>Modelo</th>
<th style='width:8rem;'>Plazas</th>
<th>Tela</th>
<th style='width:15rem;'>Color</th>
<th style='width:5rem;'>Altura Base</th>
<th style='width:50rem;'>Direccion</th>
<th>Telefono</th>
<th>Contacto</th>
<th>Modo Pago</th>

</tr>
</thead>";
while ($row = $query->fetch_assoc()) {
  $contador = $contador+1;
  $cod = $row['color'];
  $resultado = $mysqli->query("SELECT color FROM colores WHERE id = '$cod'");
$fila = $resultado->fetch_assoc();


if($row['confirma'] ==1){
$confirmacion = "<button class='btn btn-info btn-sm -btn' data-id='{$row['id']}'>Confirmado</button>";
}
else{
$confirmacion = "<button class='btn btn-danger btn-sm -btn' data-id='{$row['id']}'>No Confirmado</button>";
}


$modelo = ucfirst($row['modelo']);
if($row['modelo'] == "Botone 3 corridas de botones")
{
  $modelo = "1.35";
}
$color = $fila['color'];
$color = ucfirst(strtolower($color));
$tipotela = ucwords($row['tipotela']);
$idrutas = $row['id'];
$rut = $row['rut_cliente'];
$resultado = $mysqli->query("SELECT * FROM clientes WHERE rut = '$rut'");
$fila = $resultado->fetch_assoc();
$modopago = $row['mododepago'];
$output .= "<tbody>

<tr>
<td>{$row['id']}</td>
<td>{$row['rut_cliente']}</td>
<td>{$modelo}</td>
<td>{$row['tamano']}</td>
<td>{$tipotela}</td>
<td>{$row['color']}</td>
<td>{$row['alturabase']}</td>
<td>{$row['direccion']}  {$row['numero']}, {$row['dpto']}  {$row['comuna']}</td>
<td>{$fila['telefono']}</td>
<td>{$fila['instagram']}</td>
<td>{$row['formadepago']}</td>

</tr>
</tbody>";
}
$output .="</table>";
echo $output;



if(isset($_POST['submit'])){
$pdo = new PDO('mysql:host=localhost;dbname=cre61650_agenda', "cre61650_respaldos21", "respaldos21/");

      
$id = $_POST["pedido"];
$sql = "UPDATE pedido_detalle SET confirma=1 WHERE num_orden = :idpedido";
if($sentencia = $pdo->prepare($sql)) {


$sentencia->bindParam(":idpedido", $id, PDO::PARAM_INT);
$sentencia->execute();
echo "Gracias por confirmar";
echo "<script type='text/javascript'>function ocultardiv(){
  elemento = document.getElementById('confirmacion');
  elemento.style.display='none' } ocultardiv();</script>";




}else {
    $error = $mysqli->errno . ' ' . $mysqli->error;
    echo $error; // 1054 Unknown column 'foo' in 'field list'
}

}


?>
</div>
<?php if($modopago == 'credito' || $modopago == 'debito'){

  echo "<br>Usted indico que el pago lo realizaría con Tarjeta de Credito o debito<br> a Continuacion le dejamos el link de pago Online <br><img src='img/webpay.png' width='150px'><br> <a class='btn btn-success btn-sm -btn' href='https://www.webpay.cl/form-pay/37323'>Pagar Con Tarjeta</a><br>";
echo "<span style='font-size:12px; font-weight:bold;'>Puede realizar el pago HOY o cuando reciba el producto, Debe indicar sus datos en el formulario, una vez realizado el pago enviar el comprobante al whatsapp.</span><br><span style='font-size:13px; font-weight:bold; color:red;'>EL PAGO DEBE ESTAR REALIZADO PARA QUE NUESTROS DESPACHADORES SE RETIREN DEL DOMICILIO.</span>";
}

if($modopago == 'transferencia'){ ?>

  <br>Usted indico que el pago lo realizaría por Transferencia<br> a Continuacion le dejamos los datos: <br>
    <div  style="  margin:0 auto;" >

  <div  style=" margin:0 auto;" id="mynode">
    <img src='img/bci.jpg' width='150px'><img src='img/logorespaldos.png' width='150px'><br> <br>


     <div class="form-group row" style=" margin:0 auto; text-align:center; padding: 2px;">
<label for="nombre" class="col-sm-1 col-form-label" style="text-align:left;">Banco: </label><div class="col-sm-10"><input class="form-control xs" name="nombrea" style="text-align:center" type="text" value="BCI BANCO DE CREDITO E INVERSIONES" readonly></div>
 </div>
  <div class="form-group row" style=" margin:0 auto; text-align:center; padding: 2px;">
<label for="nombre" class="col-sm-1 col-form-label" style="text-align:left;">Nombre: </label><div class="col-sm-10"><input class="form-control xs" name="nombre"   style="text-align:center" type="text" onclick="Copiar(this)" value="RESPALDOS CHILE SPA"  readonly></div>
 </div>
   <div class="form-group row" style=" margin:0 auto; text-align:center; padding: 2px;">
<label for="nombre" class="col-sm-1 col-form-label" style="text-align:left;">Rut: </label><div class="col-sm-10"><input class="form-control xs" name="nombre"   style="text-align:center" type="text" value="77186031-1" readonly></div>
 </div>
   <div class="form-group row" style=" margin:0 auto; text-align:center; padding: 2px;">
<label for="nombre" class="col-sm-1 col-form-label" style="text-align:left;">Tipo: </label><div class="col-sm-10"><input class="form-control xs" name="nombre"  style="text-align:center" type="text" value="CUENTA CORRIENTE" readonly></div>
 </div>
 <div class="form-group row" style=" margin:0 auto; text-align:center; padding: 2px;">
<label for="nombre" class="col-sm-1 col-form-label" style="text-align:left;">Cuenta: </label><div class="col-sm-10"><input class="form-control xs" name="nombre" style="text-align:center" type="text" value="46328157" readonly></div>
 </div>
   <div class="form-group row" style=" margin:0 auto; text-align:center; padding: 2px;">
<label for="nombre" class="col-sm-1 col-form-label" style="text-align:left;">Correo: </label><div class="col-sm-10"><input class="form-control xs" name="nombre"  style="text-align:center" type="text" value="respaldos.transferencias@gmail.com" id="copy-to-clipboard-input"  readonly></div>
 </div>
 <div class="form-group row" style=" margin:0 auto; text-align:center; padding: 2px;">
<label for="nombre" class="col-sm-1 col-form-label" style="text-align:left;">Mensaje: </label><div class="col-sm-10"><input class="form-control xs" id="telefono" name="nombre"  style="text-align:center" type="text" value="SU RUT O TELEFONO" readonly></div>
 </div>

<script>


jQuery(document).ready(function($) {
$('.copy-to-clipboard-button').on('click', function(e) {

/* Get the text field */
var copyText = document.getElementById("copy-to-clipboard-input");
/* Prevent iOS keyboard from opening */
copyText.readOnly = true;
/* Change the input's type to text so its text becomes selectable */
copyText.type = 'text';
/* Select the text field */
copyText.select();
copyText.setSelectionRange(0, 99999); /* For mobile devices */
/* Copy the text inside the text field */
navigator.clipboard.writeText(copyText.value);
/* Replace the tooltip's text */
var tooltip = document.getElementById("myTooltip");
tooltip.innerHTML = "Copied: " + copyText.value;
/* Change the input's type back to hidden */
copyText.type = 'hidden';
});
$('#copy-to-clipboard-button').on('mouseout', function(e) {
var tooltip = document.getElementById("myTooltip");
tooltip.innerHTML = "Copy to clipboard";
});
});move();
}
</script>





</div>
</div>


  <?php

 
echo "<span style='font-size:12px; font-weight:bold;'>La transferencia puede realizarla HOY o cuando reciba el producto, Una vez realizado el pago enviar el comprobante al whatsapp.</span><br><span style='font-size:13px; font-weight:bold; color:red;'>EL PAGO DEBE ESTAR REALIZADO PARA QUE NUESTROS DESPACHADORES SE RETIREN DEL DOMICILIO.</span>";
?><br>
<input type="button" class="btn btn-success btn-xl -btn" id="fooo" value="Descargar Imagen de Datos">
<?php
}



?>
<br>

</div>

</br>
   <script type="text/javascript" src="https://cdn.bootcss.com/dom-to-image/2.6.0/dom-to-image.min.js"></script>
      <script type="text/javascript" src="https://cdn.bootcss.com/FileSaver.js/2014-11-29/FileSaver.min.js"></script>
  
 <script>
var node = document.getElementById('mynode');
var btn = document.getElementById('fooo');

btn.onclick = function() {

  domtoimage.toBlob(document.getElementById('mynode'))
    .then(function(blob) {
      window.saveAs(blob, 'datos.jpg');
    });
}
</script>   


  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">

    

        

  <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>Respaldos Chile 2022</span></strong>. Todos los derechos reservados.
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/flexstart-bootstrap-startup-template/ -->
        <!-- Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a> -->
      </div>
    </div>
  </footer><!-- End Footer -->


  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="old_tienda/assets/vendor/bootstrap/js/bootstrap.bundle.js"></script>
  <script src="old_tienda/assets/vendor/aos/aos.js"></script>
 
  <script src="old_tienda/assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="old_tienda/assets/vendor/purecounter/purecounter.js"></script>
  <script src="old_tienda/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="old_tienda/assets/vendor/glightbox/js/glightbox.min.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

<script type="text/javascript">
   function establecerVisibilidadImagen(id, visibilidad) {
var img = document.getElementById(id);
img.style.visibility = (visibilidad ? 'visible' : 'hidden');
}


</script>
<script type="text/javascript">
  $(document).ready(function(){
    $('#listatelas').val(1);
    


    
// recargarLista();

    $('#listatelas').change(function(){
      recargarLista();
      recargarListaImg();

    });

     $("#select2lista").change(function(){
      

     });
  })
</script>
<script type="text/javascript">

  function recargarLista(){
    $.ajax({
      type:"POST",
      url:"datos.php",
      data:"colores=" + $('#listatelas').val(),

      success:function(r){

        $('#select2lista').html(r);
        
      }
    });
  }
</script>


<script type="text/javascript">
   
 
      function recargarListaImg(){
      
      $.ajax({

                data: "color=" + $('#listatelas').val(),
                url:   'ajax_colores.php',
                type:  'post',  
                datatype: 'html',              
                success:function (datahtml) {                 
                    
                    
                    $("#imagencolor").html(datahtml);
                    

                },
                error:function(){
                   alert("Error seleccionando el tipo de tela");

                }
            });
} 
</script>


<script type="text/javascript">
var RegionesYcomunas = {

  "regiones": [{
      "NombreRegion": "Arica y Parinacota",
      "comunas": ["Arica", "Camarones", "Putre", "General Lagos"]
  },
    {
      "NombreRegion": "Tarapacá",
      "comunas": ["Iquique", "Alto Hospicio", "Pozo Almonte", "Camiña", "Colchane", "Huara", "Pica"]
  },
    {
      "NombreRegion": "Antofagasta",
      "comunas": ["Antofagasta", "Mejillones", "Sierra Gorda", "Taltal", "Calama", "Ollagüe", "San Pedro de Atacama", "Tocopilla", "María Elena"]
  },
    {
      "NombreRegion": "Atacama",
      "comunas": ["Copiapó", "Caldera", "Tierra Amarilla", "Chañaral", "Diego de Almagro", "Vallenar", "Alto del Carmen", "Freirina", "Huasco"]
  },
    {
      "NombreRegion": "Coquimbo",
      "comunas": ["La Serena", "Coquimbo", "Andacollo", "La Higuera", "Paiguano", "Vicuña", "Illapel", "Canela", "Los Vilos", "Salamanca", "Ovalle", "Combarbalá", "Monte Patria", "Punitaqui", "Río Hurtado"]
  },
    {
      "NombreRegion": "Valparaíso",
      "comunas": ["Valparaíso", "Casablanca", "Concón", "Juan Fernández", "Puchuncaví", "Quintero", "Viña del Mar", "Isla de Pascua", "Los Andes", "Calle Larga", "Rinconada", "San Esteban", "La Ligua", "Cabildo", "Papudo", "Petorca", "Zapallar", "Quillota", "Calera", "Hijuelas", "La Cruz", "Nogales", "San Antonio", "Algarrobo", "Cartagena", "El Quisco", "El Tabo", "Santo Domingo", "San Felipe", "Catemu", "Llaillay", "Panquehue", "Putaendo", "Santa María", "Quilpué", "Limache", "Olmué", "Villa Alemana"]
  },
    {
      "NombreRegion": "Región del Libertador Gral. Bernardo O’Higgins",
      "comunas": ["Rancagua", "Codegua", "Coinco", "Coltauco", "Doñihue", "Graneros", "Las Cabras", "Machalí", "Malloa", "Mostazal", "Olivar", "Peumo", "Pichidegua", "Quinta de Tilcoco", "Rengo", "Requínoa", "San Vicente", "Pichilemu", "La Estrella", "Litueche", "Marchihue", "Navidad", "Paredones", "San Fernando", "Chépica", "Chimbarongo", "Lolol", "Nancagua", "Palmilla", "Peralillo", "Placilla", "Pumanque", "Santa Cruz"]
  },
    {
      "NombreRegion": "Región del Maule",
      "comunas": ["Talca", "ConsVtución", "Curepto", "Empedrado", "Maule", "Pelarco", "Pencahue", "Río Claro", "San Clemente", "San Rafael", "Cauquenes", "Chanco", "Pelluhue", "Curicó", "Hualañé", "Licantén", "Molina", "Rauco", "Romeral", "Sagrada Familia", "Teno", "Vichuquén", "Linares", "Colbún", "Longaví", "Parral", "ReVro", "San Javier", "Villa Alegre", "Yerbas Buenas"]
  },
    {
      "NombreRegion": "Región del Biobío",
      "comunas": ["Concepción", "Coronel", "Chiguayante", "Florida", "Hualqui", "Lota", "Penco", "San Pedro de la Paz", "Santa Juana", "Talcahuano", "Tomé", "Hualpén", "Lebu", "Arauco", "Cañete", "Contulmo", "Curanilahue", "Los Álamos", "Tirúa", "Los Ángeles", "Antuco", "Cabrero", "Laja", "Mulchén", "Nacimiento", "Negrete", "Quilaco", "Quilleco", "San Rosendo", "Santa Bárbara", "Tucapel", "Yumbel", "Alto Biobío", "Chillán", "Bulnes", "Cobquecura", "Coelemu", "Coihueco", "Chillán Viejo", "El Carmen", "Ninhue", "Ñiquén", "Pemuco", "Pinto", "Portezuelo", "Quillón", "Quirihue", "Ránquil", "San Carlos", "San Fabián", "San Ignacio", "San Nicolás", "Treguaco", "Yungay"]
  },
    {
      "NombreRegion": "Región de la Araucanía",
      "comunas": ["Temuco", "Carahue", "Cunco", "Curarrehue", "Freire", "Galvarino", "Gorbea", "Lautaro", "Loncoche", "Melipeuco", "Nueva Imperial", "Padre las Casas", "Perquenco", "Pitrufquén", "Pucón", "Saavedra", "Teodoro Schmidt", "Toltén", "Vilcún", "Villarrica", "Cholchol", "Angol", "Collipulli", "Curacautín", "Ercilla", "Lonquimay", "Los Sauces", "Lumaco", "Purén", "Renaico", "Traiguén", "Victoria", ]
  },
    {
      "NombreRegion": "Región de Los Ríos",
      "comunas": ["Valdivia", "Corral", "Lanco", "Los Lagos", "Máfil", "Mariquina", "Paillaco", "Panguipulli", "La Unión", "Futrono", "Lago Ranco", "Río Bueno"]
  },
    {
      "NombreRegion": "Región de Los Lagos",
      "comunas": ["Puerto Montt", "Calbuco", "Cochamó", "Fresia", "FruVllar", "Los Muermos", "Llanquihue", "Maullín", "Puerto Varas", "Castro", "Ancud", "Chonchi", "Curaco de Vélez", "Dalcahue", "Puqueldón", "Queilén", "Quellón", "Quemchi", "Quinchao", "Osorno", "Puerto Octay", "Purranque", "Puyehue", "Río Negro", "San Juan de la Costa", "San Pablo", "Chaitén", "Futaleufú", "Hualaihué", "Palena"]
  },
    {
      "NombreRegion": "Región Aisén del Gral. Carlos Ibáñez del Campo",
      "comunas": ["Coihaique", "Lago Verde", "Aisén", "Cisnes", "Guaitecas", "Cochrane", "O’Higgins", "Tortel", "Chile Chico", "Río Ibáñez"]
  },
    {
      "NombreRegion": "Región de Magallanes y de la AntárVca Chilena",
      "comunas": ["Punta Arenas", "Laguna Blanca", "Río Verde", "San Gregorio", "Cabo de Hornos (Ex Navarino)", "AntárVca", "Porvenir", "Primavera", "Timaukel", "Natales", "Torres del Paine"]
  },
    {
      "NombreRegion": "Región Metropolitana de Santiago",
      "comunas": ["Cerrillos", "Cerro Navia", "Conchalí", "El Bosque", "Estación Central", "Huechuraba", "Independencia", "La Cisterna", "La Florida", "La Granja", "La Pintana", "La Reina", "Las Condes", "Lo Barnechea", "Lo Espejo", "Lo Prado", "Macul", "Maipú", "Ñuñoa", "Pedro Aguirre Cerda", "Peñalolén", "Providencia", "Pudahuel", "Quilicura", "Quinta Normal", "Recoleta", "Renca", "San Joaquín", "San Miguel", "San Ramón", "Santiago", "Vitacura", "Puente Alto", "Pirque", "San José de Maipo", "Colina", "Lampa", "TilTil", "San Bernardo", "Buin", "Calera de Tango", "Paine", "Melipilla", "Alhué", "Curacaví", "María Pinto", "San Pedro", "Talagante", "El Monte", "Isla de Maipo", "Padre Hurtado", "Peñaflor"]
  }]
}


jQuery(document).ready(function () {

  var iRegion = 0;
  var htmlRegion = '<option value="sin-region">Seleccione región</option><option value="sin-region">--</option>';
  var htmlComunas = '<option value="sin-region">Seleccione comuna</option><option value="sin-region">--</option>';

  jQuery.each(RegionesYcomunas.regiones, function () {
    htmlRegion = htmlRegion + '<option value="' + RegionesYcomunas.regiones[iRegion].NombreRegion + '">' + RegionesYcomunas.regiones[iRegion].NombreRegion + '</option>';
    iRegion++;
  });

  jQuery('#regiones').html(htmlRegion);
  jQuery('#comunas').html(htmlComunas);

  jQuery('#regiones').change(function () {
    var iRegiones = 0;
    var valorRegion = jQuery(this).val();
    var htmlComuna = '<option value="sin-comuna">Seleccione comuna</option><option value="sin-comuna">--</option>';
    jQuery.each(RegionesYcomunas.regiones, function () {
      if (RegionesYcomunas.regiones[iRegiones].NombreRegion == valorRegion) {
        var iComunas = 0;
        jQuery.each(RegionesYcomunas.regiones[iRegiones].comunas, function () {
          htmlComuna = htmlComuna + '<option value="' + RegionesYcomunas.regiones[iRegiones].comunas[iComunas] + '">' + RegionesYcomunas.regiones[iRegiones].comunas[iComunas] + '</option>';
          iComunas++;
        });
      }
      iRegiones++;
    });
    jQuery('#comunas').html(htmlComuna);
  });
  jQuery('#comunas').change(function () {
    if (jQuery(this).val() == 'sin-region') {
      alert('selecciones Región');
    } else if (jQuery(this).val() == 'sin-comuna') {
      alert('selecciones Comuna');
    }
  });
  jQuery('#regiones').change(function () {
    if (jQuery(this).val() == 'sin-region') {
      alert('selecciones Región');
    }
  });

});
</script>

</html>